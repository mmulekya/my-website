


<!doctype html>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;background:var(--bg);color:#e6eef8;margin:0;min-height:100vh;display:flex;align-items:flex-start;justify-content:center;padding:28px}
      const closeBtn = document.getElementById('closeBtn');
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');

      let currentIndex = -1;

      function openAt(index){
        const t = thumbs[index];
        if(!t) return;
        const full = t.dataset.full;
        const title = t.dataset.title || '';
        modalImg.src = full;
        modalImg.alt = title;
        modalTitle.textContent = title;
        currentIndex = index;
        modal.classList.add('open');
        modal.setAttribute('aria-hidden','false');
        // focus for keyboard
        closeBtn.focus();
      }

      function closeModal(){
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden','true');
        modalImg.src = '';
        currentIndex = -1;
      }

      function showNext(delta){
        if(currentIndex === -1) return;
        let idx = currentIndex + delta;
        if(idx < 0) idx = thumbs.length - 1;
        if(idx >= thumbs.length) idx = 0;
        openAt(idx);
      }

      // wire events
      thumbs.forEach((t, i)=>{
        t.addEventListener('click', ()=> openAt(i));
        t.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openAt(i); } });
      });

      closeBtn.addEventListener('click', closeModal);
      prevBtn.addEventListener('click', ()=> showNext(-1));
      nextBtn.addEventListener('click', ()=> showNext(1));

      // click outside to close
      modal.addEventListener('click', (e)=>{ if(e.target === modal) closeModal(); });

      // keyboard navigation
      document.addEventListener('keydown', (e)=>{
        if(modal.classList.contains('open')){
          if(e.key === 'Escape') closeModal();
          if(e.key === 'ArrowRight') showNext(1);
          if(e.key === 'ArrowLeft') showNext(-1);
        }
      });

      // make thumbnails tabbable
      thumbs.forEach(t=> t.setAttribute('tabindex','0'));

      // Lazy prefetch: when hovering a thumb, start loading the full image
      thumbs.forEach((t)=>{
        t.addEventListener('pointerenter', ()=>{
          const src = t.dataset.full;
          if(!src) return;
          const s = new Image(); s.src = src;
        });
      });

    })();
  </script>
</body>
</html>